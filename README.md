# ğŸš€ Next.jsì™€ Supabaseë¥¼ í™œìš©í•œ ì¸ìŠ¤íƒ€ê·¸ë¨ í´ë¡ 

ì‹¤ì‹œê°„ ì±„íŒ…ê³¼ ì¸ì¦ ê¸°ëŠ¥ì´ êµ¬í˜„ëœ ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤íƒ€ì¼ì˜ ì†Œì…œ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

## âš¡ í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ

### ğŸ“± í”„ë¡ íŠ¸ì—”ë“œ
- **Next.js 14** 
  - App Routerë¥¼ í™œìš©í•œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
  - ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ìœ¼ë¡œ ì´ˆê¸° ë¡œë”© ì„±ëŠ¥ ìµœì í™”
  - í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ë¡œ íš¨ìœ¨ì ì¸ í•˜ì´ë“œë ˆì´ì…˜

- **TypeScript**
  - íƒ€ì… ì•ˆì •ì„± ê°•í™”
  - ê°œë°œ ì‹œ ë²„ê·¸ ì‚¬ì „ ë°©ì§€
  - ì½”ë“œ ìë™ì™„ì„±ìœ¼ë¡œ ìƒì‚°ì„± í–¥ìƒ

- **TailwindCSS & Material Tailwind**
  - Utility-First CSSë¡œ ë¹ ë¥¸ ìŠ¤íƒ€ì¼ë§
  - Material Design ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸ë¡œ ì¼ê´€ëœ UI
  - ë°˜ì‘í˜• ë””ìì¸ êµ¬í˜„

- **ìƒíƒœ ê´€ë¦¬**
  - Recoil: ì±„íŒ… UI, ì‚¬ìš©ì ì„ íƒ ë“± í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬
  - React Query: ì„œë²„ ë°ì´í„° ìºì‹± ë° ì‹¤ì‹œê°„ ë™ê¸°í™”

### ğŸ›  ë°±ì—”ë“œ - Supabase

#### ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

**ë©”ì‹œì§€ í…Œì´ë¸” (message)**
```sql
- id: bigint (PK, auto-increment)
- message: text (ë©”ì‹œì§€ ë‚´ìš©)
- sender: uuid (ë°œì‹ ì ID)
- receiver: uuid (ìˆ˜ì‹ ì ID)
- is_deleted: boolean (ì‚­ì œ ì—¬ë¶€)
- created_at: timestamptz (ìƒì„± ì‹œê°„)
```

#### ğŸ” ì¸ì¦ ì‹œìŠ¤í…œ
1. **ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ì¸ì¦**
   - OTP ê¸°ë°˜ ì´ë©”ì¼ ì¸ì¦
   - ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ì €ì¥
   - ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ ìƒíƒœ ê´€ë¦¬

2. **ì†Œì…œ ë¡œê·¸ì¸**
   - ì¹´ì¹´ì˜¤ OAuth 2.0 ì—°ë™
   - JWT í† í° ê¸°ë°˜ ì¸ì¦
   - ìë™ í”„ë¡œí•„ ë™ê¸°í™”(e-mail)

#### ğŸ”„ ì‹¤ì‹œê°„ ê¸°ëŠ¥

1. **ì±„íŒ… ì‹œìŠ¤í…œ**
   - Supabase Realtimeìœ¼ë¡œ ì¦‰ê°ì ì¸ ë©”ì‹œì§€ ì „ì†¡
   - ì½ìŒ ìƒíƒœ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
   - 1:1 ì±„íŒ…ë°© ìë™ ìƒì„±

2. **ì‚¬ìš©ì ìƒíƒœ ê´€ë¦¬**
   - Presence ê¸°ëŠ¥ìœ¼ë¡œ ì˜¨ë¼ì¸ ìƒíƒœ ì¶”ì 
   - ë§ˆì§€ë§‰ ì ‘ì† ì‹œê°„ ìë™ ì—…ë°ì´íŠ¸
   - ì‹¤ì‹œê°„ ìƒíƒœ ë³€ê²½ ì•Œë¦¼

## ğŸ’¡ ì£¼ìš” ê¸°ëŠ¥ ìƒì„¸

### 1. ì¸ì¦ í”Œë¡œìš°
```mermaid
graph LR
    A[íšŒì›ê°€ì…] --> B{ì´ë©”ì¼ ì¸ì¦}
    B -->|ì„±ê³µ| C[í”„ë¡œí•„ ì„¤ì •]
    B -->|ì‹¤íŒ¨| D[ì¬ì‹œë„]
    C --> E[ë©”ì¸ í˜ì´ì§€]
```

### 2. ì±„íŒ… ê¸°ëŠ¥
- âœ‰ï¸ ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì „ì†¡/ìˆ˜ì‹ 
- ğŸ‘¥ ì‚¬ìš©ì ëª©ë¡ì—ì„œ ì˜¨ë¼ì¸ ìƒíƒœ í‘œì‹œ

### 3. ë°ì´í„° íë¦„ ê´€ë¦¬
- ğŸ“¡ ì„œë²„ ìƒíƒœì™€ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ë¶„ë¦¬
- ğŸ”„ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ Subscription ê´€ë¦¬


## ğŸ“ í´ë” êµ¬ì¡°
```
ğŸ“¦ root
â”œâ”€â”€ ğŸ“‚ actions
â”‚   â””â”€â”€ ğŸ“„ chatActions.ts        # ì±„íŒ… ê´€ë ¨ ì„œë²„ ì•¡ì…˜
â”‚
â”œâ”€â”€ ğŸ“‚ app                       
â”‚   â”œâ”€â”€ ğŸ“‚ auth/callback        # OAuth ì²˜ë¦¬
â”‚   â”œâ”€â”€ ğŸ“‚ chat                # ì±„íŒ… í˜ì´ì§€
â”‚   â”œâ”€â”€ ğŸ“‚ discover            # ê²€ìƒ‰ í˜ì´ì§€
â”‚   â”œâ”€â”€ ğŸ“‚ people             # ìœ ì € ëª©ë¡
â”‚   â””â”€â”€ ğŸ“„ layout.tsx         # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚
â”œâ”€â”€ ğŸ“‚ components
â”‚   â”œâ”€â”€ ğŸ“‚ auth               
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ index.tsx      # ì¸ì¦ ë©”ì¸
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ signin.tsx     # ë¡œê·¸ì¸ 
â”‚   â”‚   â””â”€â”€ ğŸ“„ signup.tsx     # íšŒì›ê°€ì…
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ chat              
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ChatPeopleList.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ChatScreen.tsx 
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Message.tsx    
â”‚   â”‚   â””â”€â”€ ğŸ“„ Person.tsx     
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ sidebar.tsx        # ë„¤ë¹„ê²Œì´ì…˜
â”‚
â”œâ”€â”€ ğŸ“‚ config               
â”‚   â”œâ”€â”€ ğŸ“„ auth-provider.tsx          
â”‚   â”œâ”€â”€ ğŸ“„ ReactQueryClientProvider.tsx
â”‚   â””â”€â”€ ğŸ“„ RecoilProvider.tsx         
â”‚
â””â”€â”€ ğŸ“‚ utils              
    â”œâ”€â”€ ğŸ“‚ supabase      
    â”‚   â”œâ”€â”€ ğŸ“„ server.ts 
    â”‚   â””â”€â”€ ğŸ“„ client.ts 
    â””â”€â”€ ğŸ“‚ recoil        
        â””â”€â”€ ğŸ“„ atoms.ts  
```
